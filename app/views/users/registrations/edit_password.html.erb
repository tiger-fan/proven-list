<div class="container">
  <div class="row">
    <div class="col-xs-12 col-sm-8 col-md-6 col-sm-offset-2 col-md-offset-3">
      <h3>Change my Password <%= resource_name.to_s.humanize %></h3>
      <%= bootstrap_form_for(resource, :as => resource_name, :url => users_edit_update_password_path, :html => { :method => :put, :role => 'form'}) do |f| %>
          <p>You must enter your current password to make changes.</p>
          <div class="form-group">
            <%= f.password_field :current_password, :autofocus => true, class: 'form-control' %>
          </div>
          <div class="form-group">
            <%= f.password_field :password, :autocomplete => 'off', class: 'form-control' %>
          </div>
          <div class="form-group">
            <%= f.password_field :password_confirmation, class: 'form-control' %>
          </div>
        <%= f.submit 'Update', :class => 'btn btn-primary' %>
      <% end %>
    </div>
  </div>
</div>
<script>
  $(document).ready(function(){
    $("form").submit(function(event){
      $(".alert").remove();
      $(".help-block").remove();
      if ($("#user_password").val() == "") {
        $("#user_password").parent().parent().addClass("has-error");
        $("<span class='help-block'>Password can't be blank</span>").insertAfter("#user_password")
        event.preventDefault();    
      }
      if ($("#user_current_password").val() == "") {
        $("#user_current_password").parent().parent().addClass("has-error");
        $("<span class='help-block'>Password can't be blank</span>").insertAfter("#user_current_password")
        event.preventDefault();    
      }
    });
  });
</script>